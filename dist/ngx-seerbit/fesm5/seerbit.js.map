{"version":3,"file":"seerbit.js","sources":["ng://seerbit/lib/seerbit-service.ts","ng://seerbit/lib/seer-bit.directive.ts","ng://seerbit/lib/seer-bit.component.ts","ng://seerbit/lib/ngx-seerbit.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { SeerBitOptions } from './models/SeerBitOptions';\ninterface MyWindow extends Window {\n  SeerBitPop: { setup(options: Partial<SeerBitOptions>): { openIframe(): any } };\n}\ndeclare var SeerbitPay;\ndeclare var window: MyWindow;\n@Injectable({\n  providedIn: 'root'\n})\nexport class SeerbitService {\n  constructor() { }\n\n  loadScript(): Promise<void> {\n    return new Promise(resolve => {\n      if (window.SeerBitPop && typeof window.SeerBitPop.setup === 'function') {\n        resolve();\n        return;\n      }\n      const script = window.document.createElement('script');\n      window.document.head.appendChild(script);\n      const onLoadFunc = () => {\n        script.removeEventListener('load', onLoadFunc);\n        resolve();\n      };\n      script.addEventListener('load', onLoadFunc);\n    //  script.setAttribute('src', 'http://rubic.surge.sh/api/v1/seerbit.js');\n      script.setAttribute('src', '/assets/js/seerbit.js');\n      setTimeout(() => {\n        SeerbitPay;\n      }, 3000);\n    });\n  }\n  getSeerBitOptions(obj: SeerBitOptions): SeerBitOptions {\n    //const seerBitOptions: any = {};\n    const seerBitOptions: SeerBitOptions = {\n      amount: obj.amount,\n      tranref: obj.tranref,\n      public_key: obj.public_key,\n      currency: obj.currency || 'NGN',\n      callbackurl: obj.callbackurl || '',\n      country: obj.country,\n      description: obj.description\n    };\n    return seerBitOptions;\n  }\n  checkInput(obj: Partial<SeerBitOptions>): string {\n    if (!obj.public_key) {\n      return 'Seerbit: Please insert a your public key';\n    }\n    if (!obj.amount) {\n      return 'Seerbit: Transaction amount cannot be empty';\n    }\n    if (!obj.tranref) {\n      return 'Seerbit: Transaction ref cannot be empty';\n    }\n    return '';\n  }\n}\n","import { Directive, Input, Output, EventEmitter, HostListener } from '@angular/core';\nimport { SeerbitService } from './seerbit-service';\nimport { SeerBitOptions, PrivateSeerBitOptions } from './models/SeerBitOptions';\ninterface MyWindow extends Window {\n  SeerbitPay:\n  {\n    (options: any,\n      close: any,\n      callback: any)\n  };\n}\ndeclare var window: MyWindow;\n@Directive({\n  selector: '[seer-bit]'\n})\nexport class SeerBitButtonDirective {\n\n  // @Input() tranref: string;\n  // @Input() currency: string;\n  // @Input() description: string;\n  // @Input() country: string;\n  // @Input() amount: string;\n  // @Input() callbackurl: string;\n  // @Input() public_key: string;\n  @Input() options: any;\n  @Output() callback: EventEmitter<any> = new EventEmitter<any>();\n  @Output() close: EventEmitter<any> = new EventEmitter<any>();\n  private _options: Partial<PrivateSeerBitOptions>;\n  closeFn:any; callbackFn:any;\n  constructor(private seerBitService: SeerbitService) {\n\n  }\n\n  async pay() {\n    let errorText = this.validateInput(this.options);\n    this.generateOptions(this.options);\n\n    if (errorText) {\n      console.error(errorText);\n      return errorText;\n    }\n    await this.seerBitService.loadScript();\n    window.SeerbitPay(this._options, this.closeFn, this.callbackFn)\n  }\n  generateOptions(obj: any) {\n    this._options = this.seerBitService.getSeerBitOptions(obj);\n    this.closeFn = (...response) => {\n      if (!this.close.observers.length) {\n        this.close.emit(...response);\n      }\n    }\n    this.callbackFn = (...response) => {\n      this.callback.emit(...response);\n    };\n  }\n  validateInput(obj: SeerBitOptions) {\n    if (!this.callback.observers.length) {\n      return 'Seerbit: Insert a callback output like so (callback)=\\'PaymentComplete($event)\\' to check payment status';\n    }\n    return this.seerBitService.checkInput(obj);\n  }\n  @HostListener('click')\n  async buttonClick() {\n    this.pay();\n  }\n}\n","import { Component, OnInit, Output, Input, EventEmitter, HostListener } from '@angular/core';\nimport { PrivateSeerBitOptions, SeerBitOptions } from './models/SeerBitOptions';\nimport { SeerbitService } from './seerbit-service';\ninterface MyWindow extends Window {\n  SeerbitPay:\n  {\n    (options: any, close: any, callback: any)\n  };\n}\ndeclare var window: MyWindow;\n@Component({\n  selector: 'seer-bit',\n  template: `<button [ngClass]=\"class\" [ngStyle]=\"style\"><ng-content></ng-content></button>`,\n})\nexport class SeerBitComponent {\n  @Input() class: string;\n  @Input() style: object;\n  @Input() options: any;\n  @Output() callback: EventEmitter<any> = new EventEmitter<any>();\n  @Output() close: EventEmitter<any> = new EventEmitter<any>();\n  private _options: Partial<PrivateSeerBitOptions>;\n  closeFn: any; callbackFn: any;\n  constructor(private seerBitService: SeerbitService) {\n\n  }\n  generateOptions(obj: any) {\n    this._options = this.seerBitService.getSeerBitOptions(obj);\n    this.closeFn = (...response) => {\n      if (!this.close.observers.length) {\n        this.close.emit(...response);\n      }\n    }\n    this.callbackFn = (...response) => {\n      this.callback.emit(...response);\n    };\n  }\n  validateInput(obj: SeerBitOptions) {\n    if (!this.callback.observers.length) {\n      return 'Seerbit: Insert a callback output like so (callback)=\\'PaymentComplete($event)\\' to check payment status';\n    }\n    return this.seerBitService.checkInput(obj);\n  }\n  @HostListener('click')\n  async buttonClick() {\n    this.pay();\n  }\n    async pay() {\n    let errorText = this.validateInput(this.options);\n    this.generateOptions(this.options);\n    if (errorText) {\n      console.error(errorText);\n      return errorText;\n    }\n    await this.seerBitService.loadScript();\n    window.SeerbitPay(this._options, this.closeFn, this.callbackFn)\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { SeerBitButtonDirective } from './seer-bit.directive';\nimport { SeerBitComponent } from './seer-bit.component'; \nimport { CommonModule } from '@angular/common';\n\n\n@NgModule({\n  declarations: [SeerBitButtonDirective, SeerBitComponent],\n  imports: [CommonModule],\n  exports: [SeerBitButtonDirective,SeerBitComponent]\n})\nexport class NgxSeerbitModule { }\n"],"names":["MyWindow"],"mappings":"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"}